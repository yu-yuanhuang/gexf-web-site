<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>社會網絡圖互動展示</title>
  <link rel="stylesheet" href="styles.css" />

  <!-- Libraries (deferred to avoid blocking first paint) -->
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/sigma.js/3.0.0/sigma.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/graphology@0.26.0/dist/graphology.umd.min.js"></script>

  <!-- App -->
  <script defer src="app.js"></script>
</head>
<body>
  <div id="app">
    <aside id="sidebar">
      <div class="sidebar-header">
        <div class="title">社會網絡圖（互動展示）</div>
        <div class="subtitle" id="stats">尚未載入</div>
      </div>

      <section class="panel">
        <h2>顯示控制</h2>

        <div class="field">
          <label>
            <input type="checkbox" id="toggle-isolates" checked />
            顯示孤立節點
          </label>
        </div>

        <div class="field">
          <label for="edge-weight">邊權重門檻（weight）</label>
          <div class="range-row">
            <input type="range" id="edge-weight" min="0" max="1" step="0.01" value="0" />
            <div class="range-value" id="edge-weight-val">0</div>
          </div>
          <div class="hint" id="edge-weight-hint"></div>
        </div>

        <div class="field">
          <label for="degree">邊數門檻（degree）</label>
          <div class="range-row">
            <input type="range" id="degree" min="0" max="1" step="1" value="0" />
            <div class="range-value" id="degree-val">0</div>
          </div>
          <div class="hint" id="degree-hint"></div>
        </div>

        <div class="field">
          <label for="wdegree">加權邊數門檻（weighted degree）</label>
          <div class="range-row">
            <input type="range" id="wdegree" min="0" max="1" step="0.01" value="0" />
            <div class="range-value" id="wdegree-val">0</div>
          </div>
          <div class="hint" id="wdegree-hint"></div>
        </div>

        <div class="field">
          <label for="betweenness">中介中心性門檻（betweenness）</label>
          <div class="range-row">
            <input type="range" id="betweenness" min="0" max="1" step="0.01" value="0" />
            <div class="range-value" id="betweenness-val">0</div>
          </div>
          <div class="hint" id="betweenness-hint"></div>
        </div>
      </section>

      <section class="panel">
        <h2>節點清單（顯示／不顯示）</h2>
        <div class="field">
          <input type="text" id="node-search" placeholder="搜尋節點…" />
        </div>
        <div class="buttons-row">
          <button id="btn-all" type="button">全選</button>
          <button id="btn-none" type="button">全不選</button>
          <button id="btn-invert" type="button">反選</button>
        </div>
        <div id="node-list" class="node-list"></div>
      </section>

      <section class="panel small">
        <h2>操作提示</h2>
        <ul class="tips">
          <li>滑鼠滾輪：放大／縮小</li>
          <li>拖曳空白處：平移</li>
          <li>游標停在節點上：顯示節點資訊</li>
        </ul>
      </section>

      <section class="panel small note">
        <h2>說明</h2>
        <div class="hint">
          本站以「展示」為目的，已在資料端完成主要計算（布局與指標），前端僅負責渲染與過濾。
        </div>
      </section>
    </aside>

    <main id="main">
      <div id="graph-container"></div>

      <div id="graph-toolbar">
        <button id="zoom-in" title="放大" type="button">＋</button>
        <button id="zoom-out" title="縮小" type="button">－</button>
        <button id="reset" title="重置視角" type="button">重置</button>
      </div>

      <div id="tooltip" class="tooltip" style="display:none;"></div>

      <!-- Loading overlay with progress bar -->
      <div id="load-overlay" class="load-overlay" aria-live="polite">
        <div class="load-card">
          <div class="load-title">載入圖譜中…</div>
          <div class="load-bar"><div id="load-bar-inner" class="load-bar-inner"></div></div>
          <div id="load-text" class="load-text">準備中</div>
        </div>
      </div>
    </main>
  </div>
</body>
</html>
